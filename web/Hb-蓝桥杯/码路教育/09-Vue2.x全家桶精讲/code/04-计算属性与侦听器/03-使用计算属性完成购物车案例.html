<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<script src="../lib/vue2.7.8.js"></script>
		<style>
			h3{
				text-align: center;
			}
			table,
			tr,
			td {
				display: flex;
				justify-content: center;
				align-items: center;
				
				border: 1px solid skyblue;
				border-collapse: collapse;
			}

			td {
				width: 150px;
				height: 50px;
				text-align: center;
				line-height: 50px;
			}
		</style>
	</head>

	<body>
		<div class="app">
			<h3>{{name}}</h3>
			<!-- 使用表格，显示数据 -->
			<table>
				<tr>
					<th>商品名称</th>
					<th>单价</th>
					<th>数量</th>
					<th>总价</th>
				</tr>
				<tr v-for="(item,index) in cart">
					<td>{{item.title}}</td>
					<td>{{item.price}}</td>
					<td>
						<button @click="minus(item)">-1</button>
						&nbsp;{{item.count}}&nbsp;
						<button @click="add(item)">+1</button>
					</td>
					<td>{{item.count * item.price}}</td>
				</tr>
			</table>
			<h3>所有商品的总价：{{total}}</h3>
		</div>

		<script>
			let vm = new Vue({
				el: ".app",
				data() {
					return {
						name: "shop",
						cart: [{
								id: 1,
								title: "手机",
								price: 1999,
								count: 1
							},
							{
								id: 2,
								title: "电脑",
								price: 9992,
								count: 1
							},
							{
								id: 3,
								title: "衣服",
								price: 29,
								count: 1
							},
							{
								id: 4,
								title: "洗衣机",
								price: 5321,
								count: 1
							},
							{
								id: 5,
								title: "篮球",
								price: 19,
								count: 1
							},
							{
								id: 6,
								title: "球杆",
								price: 2999,
								count: 1
							},
						]
					}
				},
				computed: {
					total() {
						// return 666;
						// 第一种写法
						// let sum = 0;
						// for (let i = 0; i < this.cart.length; i++) {
						//     sum += this.cart[i].price * this.cart[i].count
						// }
						// return sum;

						// 第二种写法
						// let sum = 0;
						// this.cart.forEach(item => {
						//     sum += item.price * item.count;
						// })
						// return sum;

						// 第3种写法
						// reduce 的用法，自已学
						return this.cart.reduce((prev, next) => prev + next.price * next.count, 0)
					}
				},
				methods: {
					minus(item) {
						if (item.count > 1) {
							item.count -= 1
						}
					},
					add(item) {
						item.count += 1;
					}
				}
			});
		</script>
	</body>

</html>
