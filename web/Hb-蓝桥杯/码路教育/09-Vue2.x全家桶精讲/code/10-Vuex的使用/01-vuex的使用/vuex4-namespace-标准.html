<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id="app">
			<h1>{{appName}}</h1>
			<dl>
				<dt>商品列表</dt>
				<dd v-for="item in products">{{item.name}}</dd>
			</dl>
		</div>
		<script src="https://unpkg.com/vue@2.5.17/dist/vue.js"></script>
		<script src="https://unpkg.com/vuex@3.0.1/dist/vuex.js"></script>
		<script>
			Vue.use(Vuex);
			let store = new Vuex.Store({
				modules: {
					// 全局模块
					app: {
						namespaced: true,
						state: {
							name: 'XYZ商城'
						},
						getters: {
							name: state => state.name  // 相当于return
						},
						actions: {},
						mutations: {}
					},
					// 商品模块
					product: {
						namespaced: true,
						modules: {
							// 商品列表
							list: {
								namespaced: true, // 添加命名空间
								state: {
									list: [{
											name: '苹果电脑',
											id: 0
										},
										{
											name: 'IphoneX',
											id: 1
										}
									]
								},
								getters: {
									list(state) {
										return state.list;
									}
								},
								actions: {
									queryList() {
										console.log('product queryList');
									}
								},
								mutations: {
									setList() {
										console.log('product setList')
									}
								}
							},
							// 商品详情
							detail: {
								namespaced: true,
								state: {},
								getters: {},
								actions: {},
								mutations: {}
							},
							// 其它商品页面...
						}
					},
					// 订单
					order: {
						namespaced: true,
						modules: {
							// 订单列表
							list: {
								namespaced: true,
								state: {},
								getters: {},
								actions: {},
								mutations: {}
							},
							// 订单详情
							detail: {
								namespaced: true,
								state: {},
								getters: {},
								actions: {},
								mutations: {}
							},
							// ... 其它订单模块页面
						}
					}
				}
			});

			new Vue({
				el: '#app',
				store,
				computed: {
					...Vuex.mapGetters('app', {
						appName: 'name'
		 		}),
		 		...Vuex.mapGetters('product/list', {
						products: 'list'
					})
				},
				mounted() {
					this.$store.dispatch('product/list/queryList'); // 调用 product/list 模块的 getList action
				}
			});
		</script>
	</body>
</html>
