<!-- axios源码   JS高级 -->

<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>

<button>发送请求</button>
<button>取消请求</button>

<script>
    let btns = document.querySelectorAll("button");
    let cancel;
    // 在请求一个接口前，取消前面没有完成的请求
    btns[0].onclick = async function () {
        let result = await axios("http://httpbin.org/delay/5", {
            cancelToken: new axios.CancelToken(c => {
                cancel = c;
            })
        });

        console.log("result:", result);
    }
    btns[1].onclick = function () {
        cancel(); // 手动取消上面的请求
    }
</script>