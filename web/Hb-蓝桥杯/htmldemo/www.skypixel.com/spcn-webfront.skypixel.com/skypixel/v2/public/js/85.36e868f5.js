(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{"/Wd3":function(e,a,t){e.exports={root:"iktp","form-container":"_29Lu",formContainer:"_29Lu","image-container":"_3ipT",imageContainer:"_3ipT","auth-form":"_2q1C",authForm:"_2q1C"}},"0/X8":function(e,a,t){e.exports={root:"_31kY","checkbox-container":"loO_",checkboxContainer:"loO_","captcha-container":"_39ht",captchaContainer:"_39ht",captcha:"_1UWa","pin-code-container":"_3iUI",pinCodeContainer:"_3iUI","countdown-button":"_12zR",countdownButton:"_12zR","privacy-policy":"U-xD",privacyPolicy:"U-xD",termsUse:"_1F9H","submit-form-item":"xQk_",submitFormItem:"xQk_",button:"_96ax","signup-line":"KEVe",signupLine:"KEVe",error:"_1Z0V","account-types":"_1UHO",accountTypes:"_1UHO",active:"sTv9"}},"4Z7K":function(e,a,t){"use strict";t.d(a,"a",function(){return F});var r=t("pVnL"),n=t.n(r),o=t("QILm"),i=t.n(o),s=t("lwsE"),c=t.n(s),l=t("W8MJ"),u=t.n(l),d=t("a1gu"),m=t.n(d),p=t("Nsbk"),h=t.n(p),f=t("7W2i"),b=t.n(f),g=t("PJYZ"),E=t.n(g),v=t("lSNA"),_=t.n(v),y=t("q1tI"),w=t.n(y),C=t("17x9"),N=t.n(C),k=t("TSYQ"),I=t.n(k),P=t("RGpR"),O=t.n(P),F=function(e){function a(){var e,t;c()(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=m()(this,(e=h()(a)).call.apply(e,[this].concat(n))),_()(E()(E()(t)),"state",{value:t.props.defaultValue||t.props.value,focused:!1}),_()(E()(E()(t)),"onClick",function(e){e.preventDefault();var a=t.props,r=a.disabled,n=a.controled,o=a.value,i=a.onChange;r||(n?i&&i(!o):t.setState({value:!t.state.value},function(){i&&i(t.state.value)}))}),_()(E()(E()(t)),"onFocus",function(){t.setState({focused:!0})}),_()(E()(E()(t)),"onBlur",function(){t.setState({focused:!1})}),t}return b()(a,e),u()(a,[{key:"render",value:function(){var e,a=this.props,t=a.className,r=a.children,o=a.id,s=a.disabled,c=a.controled,l=i()(a,["className","children","id","disabled","controled"]),u=this.state,d=u.value,m=u.focused;return delete l.defaultValue,w.a.createElement("div",{role:"checkbox","aria-hidden":!0,"aria-checked":c?this.props.value:d,className:I()(O.a.root,t,(e={},_()(e,O.a.disabled,s),_()(e,O.a.focused,m),e)),onClick:this.onClick},w.a.createElement("label",{htmlFor:o},w.a.createElement("div",{className:O.a.box}),w.a.createElement("input",n()({type:"checkbox"},l,{checked:c?this.props.value:d,disabled:s,onFocus:this.onFocus,onBlur:this.onBlur})),w.a.createElement("div",{className:O.a.label},r)))}}]),a}(w.a.PureComponent);_()(F,"propTypes",{className:N.a.string,defaultValue:N.a.string,value:N.a.bool,disabled:N.a.bool,onChange:N.a.func,children:N.a.node,id:N.a.string,controled:N.a.bool}),_()(F,"defaultProps",{className:"",defaultValue:"",value:"",disabled:!1,onChange:function(){},children:null,id:"",controled:!1})},"7zh7":function(e,a,t){},EkvI:function(e,a,t){e.exports={root:"_1NeY","confirm-form-item":"_2kLH",confirmFormItem:"_2kLH",button:"_2XqZ","captcha-container":"_1Zud",captchaContainer:"_1Zud",captcha:"_139n",error:"_1IXv",link:"nkH9"}},LL50:function(e,a,t){e.exports={root:"_1lZc","form-container":"_1PBQ",formContainer:"_1PBQ","to-signup":"_3mMm",toSignup:"_3mMm","captcha-container":"_2l6u",captchaContainer:"_2l6u",captcha:"_3L0w","remember-container":"yE27",rememberContainer:"yE27","submit-form-item":"_1qm6",submitFormItem:"_1qm6",button:"_2bBb",error:"_3aVe",link:"_2q-C","bottom-container":"_2Oru",bottomContainer:"_2Oru","bottom-line":"_2TOx",bottomLine:"_2TOx",socials:"_3SXu","social-links":"_3KPW",socialLinks:"_3KPW","social-link-container":"_3i-3",socialLinkContainer:"_3i-3",social:"JpUc"}},MJlB:function(e,a,t){"use strict";t.r(a);var r=t("lwsE"),n=t.n(r),o=t("W8MJ"),i=t.n(o),s=t("a1gu"),c=t.n(s),l=t("Nsbk"),u=t.n(l),d=t("7W2i"),m=t.n(d),p=t("lSNA"),h=t.n(p),f=t("q1tI"),b=t.n(f),g=t("17x9"),E=t.n(g),v=t("/MKj"),_=t("JRPe"),y=t("TSYQ"),w=t.n(y),C=t("pVnL"),N=t.n(C),k=t("MVZn"),I=t.n(k),P=t("PJYZ"),O=t.n(P),F=t("RIqP"),S=t.n(F),T=t("47e7"),q=t("h7eA"),R=t("lqrD"),j=t("G2yP"),V=t("7Qib"),L=t("35zp"),U=t("SvPG"),x=t("rtTk"),A=t("4Z7K"),D=t("MaAo"),H=t("efpO"),M=t("qYEq"),B=t("WlAH"),W=t("qMZz"),G=t.n(W),z=function(e){var a=e.cb,t=e.form,r=e.scene,n=e.foreign,o=e.intl,i=function(){var e=o.messages.default,a={LOADING:e["auth:formcontrol.captcha.loading"],SLIDE:e["auth:formcontrol.captcha.slide"],SUCCESS:e["auth:formcontrol.captcha.success"],ERROR:e["auth:formcontrol.captcha.error"],FAIL:e["auth:formcontrol.captcha.fail"]};return{cn:a,en:a}};Object(f.useEffect)(function(){!function(){try{AWSC.use("nc",function(e,t){window.nc=t.init({appkey:B.ALI_AWSC_APPKEY,scene:r,renderTo:"nc",foreign:n,upLang:i(),success:function(e){var t=e.sessionId,n=e.sig,o=e.token;a("success",{session_id:t,sig:n,token:o,scene:r})},fail:function(e){a("fail",e)},error:function(e){console.log(e)}})})}catch(e){console.log(e)}}()},[]);var s=t.getFieldProps,c=t.getFieldError;return b.a.createElement("div",{className:w()(G.a.root,h()({},"".concat(G.a.rootM),"m"===B.PLATFORM))},b.a.createElement(q.a.Item,{error:c("captcha")},b.a.createElement("div",{id:"nc"}),b.a.createElement(L.b,N()({id:"captcha",required:!0,error:!!c("captcha"),type:"hidden"},s("captcha",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:o.messages.default["auth:formcontrol.captcha.slide"]})}]})))))};z.propTypes={form:E.a.shape().isRequired,cb:E.a.func.isRequired,scene:E.a.string.isRequired,foreign:E.a.bool.isRequired,intl:E.a.shape()},z.defaultProps={intl:E.a.shape()};var Z=Object(_.h)(z),K={pc:{login:"nc_login",register:"nc_register",message:"nc_message"},m:{login:"nc_login_h5",register:"nc_register_h5",message:"nc_message_h5"}},Q=t("LL50"),Y=t.n(Q),J=t("4M65"),X=t("KwH0"),$=[],ee=[{vendor:"twitter",link:Object(M.c)("twitter"),id:"btn:login.twitter"},{vendor:"facebook",link:Object(M.c)("facebook"),id:"btn:login.facebook"}];B.IS_CHINA||($=H.d?[].concat(S()($),ee):[].concat(ee,S()($)));var ae=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"onSubmit",function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.o)(I()({},a)))})}),h()(O()(O()(t)),"onSocialLogin",function(e){Object(X.f)({event:X.e.LOGIN_BUTTON,channel:e})}),h()(O()(O()(t)),"codeCb",function(e,a){"success"===e&&t.props.form.setFieldsValue({captcha:a})}),h()(O()(O()(t)),"renderSocials",function(){return b.a.createElement("div",{className:Y.a.socials},b.a.createElement("div",{className:Y.a.socialLinks},$.map(function(e){return b.a.createElement("a",{onClick:function(){return t.onSocialLogin(e.vendor)},className:w()(Y.a.socialLinkContainer,Y.a[e.vendor]),key:e.vendor,href:e.link,rel:""},b.a.createElement(x.a,{icon:e.vendor,className:Y.a.social}))})))}),t}return m()(a,e),i()(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(j.a)({key:"signIn"}))}},{key:"render",value:function(){var e=this.props.form,a=e.getFieldProps,t=e.getFieldError,r=this.props,n=r.loading,o=r.error,i=b.a.createElement(J.a,{href:"/signup",className:Y.a.link},b.a.createElement(_.b,{id:"auth:go_to_signup"}));return b.a.createElement("div",{className:Y.a.root},b.a.createElement("div",{className:Y.a.formContainer},b.a.createElement(q.a,{onSubmit:this.onSubmit},b.a.createElement(q.a.Item,{error:t("username")},b.a.createElement(L.b,N()({id:"username",label:b.a.createElement(_.b,{id:"auth:formcontrol.email_or_phone"}),required:!0,disabled:n,autoComplete:"username",error:!!t("username")},a("username",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{validator:function(e,a,t){var r=[];!Object(V.z)(a)&&a.indexOf("@")<=0&&r.push("invalid format"),t(r)},message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_email"})}]})))),b.a.createElement(q.a.Item,{error:t("password")},b.a.createElement(L.b,N()({id:"password",label:b.a.createElement(_.b,{id:"auth:formcontrol.password"}),required:!0,disabled:n,autoComplete:"current-password",error:!!t("password")},a("password",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})}]}),{type:"password"}))),b.a.createElement(Z,{cb:this.codeCb,form:this.props.form,scene:K[B.PLATFORM].login,foreign:!B.IS_CHINA}),b.a.createElement(q.a.Item,{className:Y.a.rememberContainer},b.a.createElement(A.a,N()({id:"remember",className:Y.a.remember,disabled:n},a("remember",{initialValue:!0})),b.a.createElement(_.b,{id:"auth:remember_password"})),b.a.createElement(J.a,{className:Y.a.link,href:"/forgot"},b.a.createElement(_.b,{id:"auth:forgot_password"}))),b.a.createElement(q.a.Item,{className:Y.a.submitFormItem},b.a.createElement(U.a,{className:Y.a.button,disabled:n,type:"submit",size:"large"},b.a.createElement(_.b,{id:"btn:login"})),o&&b.a.createElement("div",{className:Y.a.error},o.getMessage()))),b.a.createElement("div",{className:Y.a.toSignup},b.a.createElement(_.b,{id:"auth:go_to_signup_sentence",values:{signup:i}}))),$.length>0&&b.a.createElement("div",{className:Y.a.bottomContainer},b.a.createElement("div",{className:Y.a.bottomLine},b.a.createElement("span",null,b.a.createElement(_.b,{id:"auth:other_signin"}))),this.renderSocials()))}}]),a}(b.a.PureComponent);h()(ae,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func,setFieldsValue:E.a.func}).isRequired,loading:E.a.bool,error:E.a.instanceOf(D.a)}),h()(ae,"defaultProps",{error:null,loading:!1});var te=Object(v.b)(function(e){return{loading:e.getIn(["loading","signIn"]),error:e.getIn(["error","signIn"])}})(Object(T.a)()(Object(_.h)(ae))),re=t("QILm"),ne=t.n(re),oe=t("7zh7"),ie=t.n(oe),se=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{countdown:t.props.countdown,countingDown:!1}),h()(O()(O()(t)),"onClick",function(){var e=t.state.countdown;if(e===t.props.countdown||e<=0){var a=t.props.onClick();a&&a.then?a.then(function(e){e&&t.startCountDown()}):a&&t.startCountDown()}}),t}return m()(a,e),i()(a,[{key:"componentDidUpdate",value:function(e,a){!0===a.countingDown&&!1===this.state.countingDown&&this.props.onReactive()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"startCountDown",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.state.countdown<=0?this.setState({countdown:this.props.countdown,countingDown:!1}):(this.setState({countingDown:!0}),this.timer=setTimeout(function(){e.setState(function(e){return{countdown:e.countdown-1}},function(){e.startCountDown()})},1e3))}},{key:"render",value:function(){var e=this.props,a=e.className,t=(e.countdown,e.disabled),r=e.buttonTextId,n=e.buttonCountdownTextId,o=ne()(e,["className","countdown","disabled","buttonTextId","buttonCountdownTextId"]),i=this.state.countingDown;return b.a.createElement(U.a,N()({className:w()(ie.a.root,a),disabled:i||t},o,{onClick:this.onClick}),i?b.a.createElement(_.b,{id:n,values:{countdown:"(".concat(this.state.countdown,"s)")}}):b.a.createElement(_.b,{id:r}))}}]),a}(b.a.PureComponent);h()(se,"propTypes",{className:E.a.string,countdown:E.a.number,disabled:E.a.bool,buttonTextId:E.a.string.isRequired,buttonCountdownTextId:E.a.string.isRequired,onClick:E.a.func,onReactive:E.a.func}),h()(se,"defaultProps",{className:"",disabled:!1,countdown:60,onReactive:function(){},onClick:function(){}});var ce=t("0/X8"),le=t.n(ce),ue=t("PQbL"),de=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{accountType:0,agree:!1}),h()(O()(O()(t)),"onSubmit",function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var r=a.signUpUsername,n=a.signUpPassword,o=a.captcha,i=a.subscription,s=a.pinCode;t.props.dispatch(Object(R.r)({isPhone:B.IS_CHINA,accountType:t.state.accountType,username:r,password:n,captcha:o,pinCode:s,subscription:i}))}})}),h()(O()(O()(t)),"onClickSendPinCode",function(){return t.props.dispatch(Object(R.n)({phone:t.props.form.getFieldValue("signUpUsername"),captcha:t.props.form.getFieldValue("captcha")})).then(function(){return!t.props.error})}),h()(O()(O()(t)),"onAccountTypeChange",function(e,a){e.preventDefault(),t.setState({accountType:a})}),h()(O()(O()(t)),"onAgreeChange",function(e){t.setState({agree:e})}),h()(O()(O()(t)),"codeCb",function(e,a){"success"===e&&t.props.form.setFieldsValue({captcha:a})}),h()(O()(O()(t)),"checkPasswordConfirm",function(e,a,r){t.props.form.getFieldValue("signUpPassword")!==t.props.form.getFieldValue("signUpPassword2")?r(new Error("not same")):r()}),h()(O()(O()(t)),"checkPasswordWeak",function(e,a,r){Object(V.r)(t.props.form.getFieldValue("signUpPassword"))?r(new Error("weak password")):r()}),t}return m()(a,e),i()(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(j.a)({key:"signUp"}))}},{key:"renderOtherFormItems",value:function(){var e=this.props.form,a=e.getFieldProps,t=e.getFieldError,r=this.props.loading,n=this.state.agree;return[b.a.createElement(q.a.Item,{key:"signUpPassword",error:t("signUpPassword")},b.a.createElement(L.b,N()({id:"signup-password",label:b.a.createElement(_.b,{id:"auth:formcontrol.password"}),required:!0,disabled:r,autoComplete:"off",error:!!t("signUpPassword")},a("signUpPassword",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{min:ue.b,message:b.a.createElement(_.b,{id:"error:auth.form.min_char",values:{n:ue.b}})},{max:ue.a,message:b.a.createElement(_.b,{id:"error:auth.form.max_char",values:{n:ue.a}})},{validator:this.checkPasswordWeak,message:b.a.createElement(_.b,{id:"error:auth.form.weak_password"})}]}),{type:"password"}))),b.a.createElement(q.a.Item,{key:"signUpPassword2",error:t("signUpPassword2")},b.a.createElement(L.b,N()({id:"signup-password2",label:b.a.createElement(_.b,{id:"auth:formcontrol.password2"}),required:!0,disabled:r,autoComplete:"off",error:!!t("signUpPassword2")},a("signUpPassword2",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{validator:this.checkPasswordConfirm,message:b.a.createElement(_.b,{id:"error:auth.password_not_same"})}]}),{type:"password"}))),b.a.createElement(q.a.Item,{key:"agree"},b.a.createElement(A.a,{id:"agree",className:le.a.checkboxContainer,value:n,onChange:this.onAgreeChange,disabled:r},b.a.createElement(_.b,{id:"auth:formcontrol.agree",values:{terms_of_use:b.a.createElement(J.a,{className:le.a.termsUse,href:"/terms"},b.a.createElement(_.b,{id:"nav:terms_of_use"})),privacy_policy:b.a.createElement(J.a,{className:le.a.privacyPolicy,href:"/privacy"},b.a.createElement(_.b,{id:"nav:privacy_policy"}))}}))),b.a.createElement(q.a.Item,{key:"subscription"},b.a.createElement(A.a,N()({id:"subscription",className:le.a.checkboxContainer,disabled:r},a("subscription",{initialValue:!1})),b.a.createElement(_.b,{id:"auth:formcontrol.subscription"})))]}},{key:"render",value:function(){var e=this,a=this.props.form,t=a.getFieldProps,r=a.getFieldError,n=a.getFieldValue,o=this.props,i=o.loading,s=o.error,c=this.state,l=c.accountType,u=c.agree,d=b.a.createElement(J.a,{href:"/login",className:le.a.link},b.a.createElement(_.b,{id:"auth:login"}));return b.a.createElement("div",{className:le.a.root},b.a.createElement(q.a,{onSubmit:this.onSubmit},b.a.createElement("div",{className:le.a.accountTypes},b.a.createElement("a",{className:w()(h()({},le.a.active,0===l)),href:"#user",onClick:function(a){return e.onAccountTypeChange(a,0)}},b.a.createElement(_.b,{id:"auth:account_type.user"})),b.a.createElement("a",{className:w()(h()({},le.a.active,1===l)),href:"#company",onClick:function(a){return e.onAccountTypeChange(a,1)}},b.a.createElement(_.b,{id:"auth:account_type.company"}))),b.a.createElement(q.a.Item,{error:r("signUpUsername")},b.a.createElement(L.b,N()({id:"signup-username",label:b.a.createElement(_.b,{id:B.IS_CHINA?"auth:formcontrol.phone":"auth:formcontrol.email"}),required:!0,disabled:i,autoComplete:"off",error:!!r("signUpUsername")},t("signUpUsername",{initialValue:"",validateTrigger:!!B.IS_CHINA&&void 0,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},B.IS_CHINA?{validator:function(e,a,t){var r=[];Object(V.z)(a)||r.push("invalid format"),t(r)},message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_phone"})}:{type:"email",message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_email"})}]})))),b.a.createElement(Z,{cb:this.codeCb,form:this.props.form,scene:K[B.PLATFORM].register,foreign:!B.IS_CHINA}),B.IS_CHINA&&b.a.createElement(q.a.Item,{error:r("pinCode")},b.a.createElement("div",{className:le.a.pinCodeContainer},b.a.createElement(L.b,N()({id:"pin-code",label:b.a.createElement(_.b,{id:"auth:formcontrol.pin_code"}),required:!0,disabled:i,error:!!r("pinCode")},t("pinCode",{initialValue:"",rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{len:4,message:b.a.createElement(_.b,{id:"error:auth.form.n_char",values:{n:4}})}]}))),b.a.createElement(se,{className:le.a.countdownButton,disabled:!!r("signUpUsername")||!n("signUpUsername")||!!r("captcha")||!n("captcha")||i,buttonTextId:"btn:send_pin_code",buttonCountdownTextId:"btn:sendpin_code.countdown",onClick:this.onClickSendPinCode}))),this.renderOtherFormItems(),b.a.createElement(q.a.Item,{className:le.a.submitFormItem},b.a.createElement(U.a,{className:le.a.button,disabled:i||!u,type:"submit",size:"large"},b.a.createElement(_.b,{id:"btn:signup"})),s&&b.a.createElement("div",{className:le.a.error},s.getMessage()))),b.a.createElement("div",{className:le.a.signupLine},b.a.createElement(_.b,{id:"auth:go_to_login_sentence",values:{login:d}})))}}]),a}(b.a.PureComponent);h()(de,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func,getFieldValue:E.a.func,setFieldsValue:E.a.func}).isRequired,loading:E.a.bool,error:E.a.instanceOf(D.a)}),h()(de,"defaultProps",{error:null,loading:!1});var me=Object(v.b)(function(e){return{loading:e.getIn(["loading","signUp"]),error:e.getIn(["error","signUp"])}})(Object(T.a)()(Object(_.h)(de))),pe=t("zO39"),he=t("oBTp"),fe=t("r2Gn"),be=t.n(fe),ge=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{redirectTime:3}),h()(O()(O()(t)),"onSubmit",function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.c)(I()({},a)))})}),h()(O()(O()(t)),"codeCb",function(e,a){"success"===e&&t.props.form.setFieldsValue({captcha:a})}),h()(O()(O()(t)),"decreaseTime",function(){clearTimeout(t.timer),1===t.state.redirectTime?t.props.dispatch(Object(he.b)("/login")):t.timer=setTimeout(function(){t.state.redirectTime>0&&t.setState({redirectTime:t.state.redirectTime-1},t.decreaseTime())},1e3)}),t}return m()(a,e),i()(a,[{key:"componentDidUpdate",value:function(e){this.props.isSuccess&&!e.isSuccess&&this.decreaseTime()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(R.f)()),this.props.dispatch(Object(j.a)({key:"forgot"}))}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.isSuccess,r=e.error,n=this.props.form,o=n.getFieldProps,i=n.getFieldError;if(t)return b.a.createElement("div",{className:be.a.successContainer},b.a.createElement("div",{className:be.a.success},b.a.createElement(pe.a,{className:be.a.icon}),b.a.createElement(_.b,{id:"auth:forgot_password.success"})),b.a.createElement(J.a,{href:"/login",className:be.a.link},b.a.createElement(_.b,{id:"auth:login"}),b.a.createElement("span",null,"(".concat(this.state.redirectTime,"s)"))));var s=b.a.createElement(J.a,{href:"/login",className:be.a.link},b.a.createElement(_.b,{id:"auth:login"})),c=b.a.createElement(J.a,{href:"/forgot_phone",className:be.a.link},b.a.createElement(_.b,{id:"auth:go_to_find_by_phone"}));return b.a.createElement("div",{className:be.a.root},b.a.createElement(q.a,{onSubmit:this.onSubmit},b.a.createElement(q.a.Item,{error:i("forgotEmail")},b.a.createElement(L.b,N()({id:"forgot-email",label:b.a.createElement(_.b,{id:"auth:formcontrol.email"}),required:!0,disabled:a,error:!!i("forgotEmail")},o("forgotEmail",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{type:"email",message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_email"})}]})))),b.a.createElement(Z,{cb:this.codeCb,form:this.props.form,scene:K[B.PLATFORM].message,foreign:!B.IS_CHINA}),b.a.createElement(q.a.Item,{className:be.a.submitFormItem},b.a.createElement(U.a,{className:be.a.button,disabled:a,type:"submit",size:"large"},b.a.createElement(_.b,{id:"btn:send_forgot"})),r&&b.a.createElement("div",{className:be.a.error},r.getMessage()))),b.a.createElement("div",{className:be.a.toLogin},b.a.createElement(_.b,{id:"auth:go_to_login_or_other_way",values:{login:s,other:c}})))}}]),a}(b.a.PureComponent);h()(ge,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func,setFieldsValue:E.a.func}).isRequired,loading:E.a.bool,error:E.a.instanceOf(D.a),isSuccess:E.a.bool}),h()(ge,"defaultProps",{loading:!1,error:null,isSuccess:!1});var Ee=Object(v.b)(function(e){return{loading:e.getIn(["loading","forgot"]),error:e.getIn(["error","forgot"]),isSuccess:e.getIn(["account","forgotSuccess"])}})(Object(T.a)()(Object(_.h)(ge))),ve=t("fjhF"),_e=t("EkvI"),ye=t.n(_e),we=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{invalidToken:!1}),h()(O()(O()(t)),"onSubmit",function(e){if(e.preventDefault(),t.props.phone)t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.l)(I()({},a,{phone:t.props.phone})))});else{if(!Object(ve.c)("token"))return void t.setState({invalidToken:!0});t.setState({invalidToken:!1}),t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.k)(I()({},a)))})}}),h()(O()(O()(t)),"checkPasswordConfirm",function(e,a,r){t.props.form.getFieldValue("password")!==t.props.form.getFieldValue("password2")?r(new Error("not same")):r()}),h()(O()(O()(t)),"checkPasswordWeak",function(e,a,r){Object(V.r)(t.props.form.getFieldValue("password"))?r(new Error("weak password")):r()}),h()(O()(O()(t)),"codeCb",function(e,a){"success"===e&&t.props.form.setFieldsValue({captcha:a})}),t}return m()(a,e),i()(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(j.a)({key:"resetPassword"})),this.props.dispatch(Object(j.a)({key:"resetPasswordByPhone"}))}},{key:"render",value:function(){var e=this.props.form,a=e.getFieldProps,t=e.getFieldError,r=this.props,n=r.loading,o=r.error,i=r.errorByPhone,s=r.isSuccess,c=r.phone;if(s&&!c){var l=b.a.createElement(J.a,{href:"/login",className:ye.a.link},b.a.createElement(_.b,{id:"auth:login"}));return b.a.createElement(_.b,{id:"auth:reset_pasword.success",values:{login:l}})}return b.a.createElement(q.a,{className:ye.a.root,onSubmit:this.onSubmit},b.a.createElement(q.a.Item,{error:t("password")},b.a.createElement(L.b,N()({id:"reset-password",label:b.a.createElement(_.b,{id:"auth:formcontrol.password"}),required:!0,disabled:n,error:!!t("password")},a("password",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{min:ue.b,message:b.a.createElement(_.b,{id:"error:auth.form.min_char",values:{n:ue.b}})},{max:ue.a,message:b.a.createElement(_.b,{id:"error:auth.form.max_char",values:{n:ue.a}})},{validator:this.checkPasswordWeak,message:b.a.createElement(_.b,{id:"error:auth.form.weak_password"})}]}),{type:"password"}))),b.a.createElement(q.a.Item,{error:t("password2")},b.a.createElement(L.b,N()({id:"reset-password2",label:b.a.createElement(_.b,{id:"auth:formcontrol.password2"}),required:!0,disabled:n,error:!!t("password2")},a("password2",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{validator:this.checkPasswordConfirm,message:b.a.createElement(_.b,{id:"error:auth.password_not_same"})}]}),{type:"password"}))),c?b.a.createElement(q.a.Item,{error:t("smsCode")},b.a.createElement("div",{className:ye.a.captchaContainer},b.a.createElement(L.b,N()({id:"smsCode",label:b.a.createElement(_.b,{id:"auth:formcontrol.sms_code"}),required:!0,disabled:n,error:!!t("smsCode")},a("smsCode",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{len:4,message:b.a.createElement(_.b,{id:"error:auth.form.n_char",values:{n:4}})}]}))))):b.a.createElement(Z,{cb:this.codeCb,form:this.props.form,scene:K[B.PLATFORM].message,foreign:!B.IS_CHINA}),b.a.createElement(q.a.Item,{className:ye.a.confirmFormItem},b.a.createElement(U.a,{className:ye.a.button,disabled:n,type:"submit",size:"large"},b.a.createElement(_.b,{id:"btn:confirm"})),o&&o.getMessage&&!c&&b.a.createElement("div",{className:ye.a.error},o.getMessage()),i&&i.getMessage&&c&&b.a.createElement("div",{className:ye.a.error},i.getMessage()),this.state.invalidToken&&b.a.createElement("div",{className:ye.a.error},b.a.createElement(_.b,{id:"error:invalid_token"}))))}}]),a}(b.a.PureComponent);h()(we,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func,getFieldValue:E.a.func,setFieldsValue:E.a.func}).isRequired,loading:E.a.bool,isSuccess:E.a.bool,error:E.a.instanceOf(D.a),errorByPhone:E.a.instanceOf(D.a),phone:E.a.string}),h()(we,"defaultProps",{error:null,errorByPhone:null,loading:!1,isSuccess:!1,phone:""});var Ce=Object(v.b)(function(e){return{loading:e.getIn(["loading","resetPassword"]),error:e.getIn(["error","resetPassword"]),errorByPhone:e.getIn(["error","resetPasswordByPhone"]),isSuccess:e.getIn(["account","resetSuccess"])}})(Object(T.a)()(Object(_.h)(we))),Ne=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{cooldownTime:60}),h()(O()(O()(t)),"onSubmit",function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.d)(I()({},a))).then(function(){t.props.error||t.decreaseTime()})})}),h()(O()(O()(t)),"codeCb",function(e,a){"success"===e&&t.props.form.setFieldsValue({captcha:a})}),h()(O()(O()(t)),"decreaseTime",function(){clearTimeout(t.timer),t.timer=setInterval(function(){t.state.cooldownTime>0?t.setState({cooldownTime:t.state.cooldownTime-1}):(clearTimeout(t.timer),t.setState({cooldownTime:60}))},1e3)}),t}return m()(a,e),i()(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(R.f)()),this.props.dispatch(Object(R.g)()),this.props.dispatch(Object(j.a)({key:"forgot"}))}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.isSuccess,r=e.isResetSuccess,n=e.error,o=this.state.cooldownTime,i=this.props.form,s=i.getFieldProps,c=i.getFieldError,l=i.getFieldValue,u=b.a.createElement(J.a,{href:"/login",className:be.a.link},b.a.createElement(_.b,{id:"auth:login"}));if(r)return b.a.createElement(_.b,{id:"auth:reset_pasword.success",values:{login:u}});var d=b.a.createElement(J.a,{href:"/forgot",className:be.a.link},b.a.createElement(_.b,{id:"auth:go_to_find_by_email"}));return b.a.createElement("div",{className:be.a.root},b.a.createElement(q.a,{onSubmit:this.onSubmit},b.a.createElement(q.a.Item,{error:c("forgotPhone")},b.a.createElement(L.b,N()({id:"forgot-phone",label:b.a.createElement(_.b,{id:"auth:formcontrol.phone"}),required:!0,disabled:a,error:!!c("forgotPhone")},s("forgotPhone",{initialValue:"",validateTrigger:!1,rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{validator:function(e,a,t){var r=[];Object(V.z)(a)||r.push("invalid format"),t(r)},message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_phone"})}]})))),b.a.createElement(Z,{cb:this.codeCb,form:this.props.form,scene:K[B.PLATFORM].message,foreign:!B.IS_CHINA}),b.a.createElement(q.a.Item,{className:be.a.submitFormItem},b.a.createElement(U.a,{className:be.a.button,disabled:a||o<60,type:"submit",size:"large"},o<60?"".concat(o,"s"):b.a.createElement(_.b,{id:"btn:send_forgot_sms"})),n&&b.a.createElement("div",{className:be.a.error},n.getMessage()))),b.a.createElement("div",{className:be.a.toLogin},b.a.createElement(_.b,{id:"auth:go_to_login_or_other_way",values:{login:u,other:d}})),t&&b.a.createElement("div",{className:be.a.resetFormContainer},b.a.createElement(Ce,{phone:l("forgotPhone")})))}}]),a}(Ee);h()(Ne,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func}).isRequired,loading:E.a.bool,error:E.a.instanceOf(D.a),isSuccess:E.a.bool,isResetSuccess:E.a.bool}),h()(Ne,"defaultProps",{loading:!1,error:null,isSuccess:!1,isResetSuccess:!1});var ke=Object(v.b)(function(e){return{loading:e.getIn(["loading","forgot"]),error:e.getIn(["error","forgot"]),isSuccess:e.getIn(["account","forgotSuccess"]),isResetSuccess:e.getIn(["account","resetByPhoneSuccess"])}})(Object(T.a)()(Object(_.h)(Ne))),Ie=t("Z/6C"),Pe=t.n(Ie),Oe=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{loaded:!1,src:"/api/v2/auth-image?".concat(Object(V.i)())}),h()(O()(O()(t)),"onLoad",function(){t.setState({loaded:!0})}),h()(O()(O()(t)),"onClick",function(e){e&&e.preventDefault&&e.preventDefault(),t.setState({loaded:!1}),t.generateSrc()}),h()(O()(O()(t)),"generateSrc",function(){return t.setState({src:"/api/v2/auth-image?".concat(Object(V.i)())})}),t}return m()(a,e),i()(a,[{key:"update",value:function(){this.onClick()}},{key:"render",value:function(){return b.a.createElement("button",{tabIndex:"-1",className:w()(Pe.a.root,this.props.className,h()({},Pe.a.loaded,this.state.loaded)),type:"button",onClick:this.onClick},b.a.createElement("img",{alt:"captcha",src:this.state.src,onLoad:this.onLoad}))}}]),a}(b.a.PureComponent);h()(Oe,"propTypes",{className:E.a.string}),h()(Oe,"defaultProps",{className:""});var Fe=t("lri5"),Se=t.n(Fe),Te=function(e){function a(){var e,t;n()(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=c()(this,(e=u()(a)).call.apply(e,[this].concat(o))),h()(O()(O()(t)),"state",{captchaForPhoneVisiable:!0}),h()(O()(O()(t)),"onSubmit",function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||t.props.dispatch(Object(R.a)(I()({},a)))})}),h()(O()(O()(t)),"onClickSendPinCode",function(){return t.setState({captchaForPhoneVisiable:!0}),t.props.dispatch(Object(R.m)({phone:t.props.form.getFieldValue("phone"),captcha:t.props.form.getFieldValue("captcha")})).then(function(){return!t.props.error&&(t.setState({captchaForPhoneVisiable:!1}),!0)})}),t}return m()(a,e),i()(a,[{key:"componentWillReceiveProps",value:function(e){e.error&&e.error!==this.props.error&&this.captcha&&this.captcha.update()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(j.a)({key:"bindPhone"}))}},{key:"renderCaptcha",value:function(){var e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.form,r=t.getFieldProps,n=t.getFieldError,o=this.props.loading;return b.a.createElement(q.a.Item,{key:"captcha",error:n("captcha"),style:{display:a?void 0:"none"}},b.a.createElement("div",{className:Se.a.captchaContainer},b.a.createElement(L.b,N()({id:"bind-phone-captcha",label:b.a.createElement(_.b,{id:"auth:formcontrol.captcha"}),required:!0,disabled:o,error:!!n("captcha")},r("captcha",{initialValue:"",rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{len:4,message:b.a.createElement(_.b,{id:"error:auth.form.n_char",values:{n:4}})}]}))),b.a.createElement(Oe,{className:Se.a.captcha,ref:function(a){e.captcha=a}})))}},{key:"render",value:function(){var e=this,a=this.props,t=a.loading,r=a.error,n=this.props.form,o=n.getFieldProps,i=n.getFieldError,s=n.getFieldValue,c=this.state.captchaForPhoneVisiable;return b.a.createElement("div",{className:Se.a.root},b.a.createElement("div",{className:Se.a.hint},b.a.createElement(_.b,{id:"auth:bind_phone.hint"})),b.a.createElement(q.a,{onSubmit:this.onSubmit},b.a.createElement(q.a.Item,{error:i("phone")},b.a.createElement(L.b,N()({id:"bind-phone",label:b.a.createElement(_.b,{id:"auth:formcontrol.phone"}),required:!0,disabled:t,autoComplete:"off",error:!!i("phone")},o("phone",{initialValue:"",rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{validator:function(e,a,t){var r=[];Object(V.z)(a)||r.push("invalid format"),t(r)},message:b.a.createElement(_.b,{id:"error:auth.auth.invalid_phone"})}]})))),this.renderCaptcha(c),b.a.createElement(q.a.Item,{error:i("pinCode")},b.a.createElement("div",{className:Se.a.pinCodeContainer},b.a.createElement(L.b,N()({id:"pin-code",label:b.a.createElement(_.b,{id:"auth:formcontrol.pin_code"}),required:!0,disabled:t,error:!!i("pinCode")},o("pinCode",{initialValue:"",rules:[{required:!0,message:b.a.createElement(_.b,{id:"error:auth.form.not_empty"})},{len:4,message:b.a.createElement(_.b,{id:"error:auth.form.n_char",values:{n:4}})}]}))),b.a.createElement(se,{className:Se.a.countdownButton,disabled:!!i("phone")||!s("phone")||!!i("captcha")||!s("captcha")||t,buttonTextId:"btn:send_pin_code",buttonCountdownTextId:"btn:sendpin_code.countdown",onClick:this.onClickSendPinCode,onReactive:function(){e.setState({captchaForPhoneVisiable:!0})}}))),b.a.createElement(q.a.Item,{className:Se.a.submitFormItem},b.a.createElement(U.a,{className:Se.a.button,disabled:t,type:"submit",size:"large"},b.a.createElement(_.b,{id:"btn:bind_phone"})),r&&b.a.createElement("div",{className:Se.a.error},r.getMessage()))))}}]),a}(b.a.PureComponent);h()(Te,"propTypes",{intl:_.i.isRequired,dispatch:E.a.func.isRequired,form:E.a.shape({getFieldProps:E.a.func,getFieldError:E.a.func,validateFields:E.a.func,getFieldValue:E.a.func}).isRequired,loading:E.a.bool,error:E.a.instanceOf(D.a)}),h()(Te,"defaultProps",{loading:!1,error:null});var qe=Object(v.b)(function(e){return{loading:e.getIn(["loading","bindPhone"]),error:e.getIn(["error","bindPhone"])}})(Object(T.a)()(Object(_.h)(Te))),Re=t("Ph4/"),je=t.n(Re),Ve=function(e){var a=e.type,t=e.className,r=e.forgotSuccess;return b.a.createElement("div",{className:w()(je.a.root,t)},function(){var e;switch(a){case ue.c.SIGNUP:e=b.a.createElement(me,null);break;case ue.c.FORGOT:e=b.a.createElement(Ee,null);break;case ue.c.FORGOT_PHONE:e=b.a.createElement(ke,null);break;case ue.c.RESET:e=b.a.createElement(Ce,null);break;case ue.c.BIND_PHONE:e=b.a.createElement(qe,null);break;case ue.c.LOGIN:default:e=b.a.createElement(te,null)}return b.a.createElement("div",{className:je.a.authFormContainer},!r&&b.a.createElement("div",{className:je.a.title},b.a.createElement(_.b,{id:"auth:formcontrol.title.".concat(a)})),e)}())};Ve.propTypes={type:E.a.oneOf([ue.c.LOGIN,ue.c.SIGNUP,ue.c.FORGOT,ue.c.FORGOT_PHONE,ue.c.RESET,ue.c.BIND_PHONE]),className:E.a.string,forgotSuccess:E.a.bool},Ve.defaultProps={type:ue.c.LOGIN,className:"",forgotSuccess:!1};var Le=Object(v.b)(function(e){return{forgotSuccess:e.getIn(["account","forgotSuccess"])}})(Object(f.memo)(Ve)),Ue=t("/Wd3"),xe=t.n(Ue),Ae=function(e){function a(){return n()(this,a),c()(this,u()(a).apply(this,arguments))}return m()(a,e),i()(a,[{key:"componentWillMount",value:function(){var e=this.props,a=e.type,t=e.dispatch;this.props.isLoggedIn?a===ue.c.RESET?t(Object(R.p)()):a!==ue.c.BIND_PHONE&&t(Object(he.c)("/")):a===ue.c.BIND_PHONE&&t(Object(R.h)({authFormType:"SIGN_IN"}))}},{key:"render",value:function(){var e=this.props.type;return b.a.createElement("div",{className:xe.a.root},!B.IS_MOBILE&&b.a.createElement("div",{className:xe.a.imageContainer}),b.a.createElement("div",{className:xe.a.formContainer},b.a.createElement(Le,{className:xe.a.authForm,type:e})))}}]),a}(b.a.Component);h()(Ae,"propTypes",{dispatch:E.a.func.isRequired,type:E.a.oneOf([ue.c.LOGIN,ue.c.SIGNUP,ue.c.FORGOT,ue.c.FORGOT_PHONE,ue.c.RESET,ue.c.BIND_PHONE]).isRequired,isLoggedIn:E.a.bool}),h()(Ae,"defaultProps",{isLoggedIn:!1});a.default=Object(v.b)(function(e,a){return{type:a.match.params.type,isLoggedIn:e.getIn(["account","account"]).isLoggedIn()}})(Ae)},PQbL:function(e,a,t){"use strict";t.d(a,"b",function(){return r}),t.d(a,"a",function(){return n});var r=8,n=20;a.c={LOGIN:"login",SIGNUP:"signup",FORGOT:"forgot",FORGOT_PHONE:"forgot_phone",RESET:"reset_password",BIND_PHONE:"verify"}},"Ph4/":function(e,a,t){e.exports={root:"_3bsZ","auth-form-container":"_32Lf",authFormContainer:"_32Lf",title:"sj6Y"}},RGpR:function(e,a,t){e.exports={root:"_3Wca",box:"_3oWP",label:"LKNy",focused:"_3x_7",disabled:"_3PNf"}},"Z/6C":function(e,a,t){e.exports={root:"_1Mr0",loaded:"V9dX"}},lri5:function(e,a,t){e.exports={root:"c0Kf","submit-form-item":"_2r8j",submitFormItem:"_2r8j",button:"Nzvj","captcha-container":"_29Kt",captchaContainer:"_29Kt",hint:"_37G2","pin-code-container":"BQ-H",pinCodeContainer:"BQ-H","countdown-button":"_19_H",countdownButton:"_19_H",captcha:"_3X6K",error:"_2GmK"}},qMZz:function(e,a,t){e.exports={root:"_36tW","root-m":"iYFy",rootM:"iYFy"}},r2Gn:function(e,a,t){e.exports={root:"XEmv","submit-form-item":"_1M3I",submitFormItem:"_1M3I",button:"_2xcg","captcha-container":"_98gY",captchaContainer:"_98gY",captcha:"_1TAA",error:"_1ban","to-login":"_315i",toLogin:"_315i","reset-form-container":"_14zq",resetFormContainer:"_14zq","success-container":"k3l-",successContainer:"k3l-",success:"_1Jzz",icon:"Z5Wg",link:"_6J8t"}}}]);