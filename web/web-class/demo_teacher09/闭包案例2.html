<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		3、案例三
		<hr>
		<h1>请给下列新闻投票</h1>
		<ul>
			<li>北京冬奥会火种抵达北京<button id='1'>投票1</button></li>
			<li>31省区市新增本土确诊17例。<button id='2'>投票2</button></li>
			<li>互联网公司校招名额大幅增加 核心岗位首次开放<button id='3'>投票3</button></li>
			<li>多地取暖用煤价格涨超2倍<button id='4'>投票4</button></li>
		</ul>
		<script>
			// //html5 通过css选择器获得页面元素
			// var btns = document.querySelectorAll('button')
			// var tr = [0,0,0,0,0];
			// // for(var i = 0 ; i < btns.length ; i++){
			// 	//注册事件方法
			// 	btns[0].onclick = function(){
			// 		tr[0]++;
			// 		// console.log(i + " " + tr);  // 每次增加的都是最后tr数组最后一个
			// 		this.innerHTML=tr[0] + "票";
			// 	}
			// 	btns[1].onclick = function(){
			// 		tr[1]++;
			// 		this.innerHTML=tr[1] + "票";
			// 	}
			// 	btns[2].onclick = function(){
			// 		tr[2]++;
			// 		this.innerHTML=tr[2] + "票";
			// 	}
			// 	btns[3].onclick = function(){
			// 		tr[3]++;
			// 		this.innerHTML=tr[3] + "票";
			// 	}
			// // }


			var btns = document.querySelectorAll('button');
			var tr = [0, 0, 0, 0];

			function fn1() {
				for(var i = 0; i < btns.length; i++){
				    btns[i].onclick = (function(i){
				        return function(){
							// console.log(i);
							return fun(i);
				        }
				    })(i)
				}
			}
			function fun(i) {
				tr[i]++;
				console.log(i + " " + tr); // 每次增加的都是最后tr数组最后一个
				btns[i].innerHTML = tr[i] + "票";
			}
			fn1();
			
			// n也保存着，不消失
			// var btn=document.querySelectorAll('button')
			// for(var i=0;i<btn.length;i++){
			// 	(function(i){
			// 		//alert(i)
			// 		var n=0;
			// 		btn[i].onclick=function(){
			// 			n++
			// 			btn[i].innerHTML="已投("+n+")票"
			// 			console.log(n)
			// 			// alert('点击第'+(i+1)+'个按钮')
			// 		}
			// 	})(i)
			// }
			
			
		</script>
	</body>
</html>
